<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Play The History Quiz</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

    body {
      margin: 0;
      font-family: 'Press Start 2P', cursive, Arial, sans-serif;
      background: url('background-history.jpg') no-repeat center center fixed;
      background-size: cover;
      color: #f6bc26;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 20px;
      box-sizing: border-box;
      user-select: none;
    }

    #quiz-container {
      background: rgba(16, 39, 75, 0.85);
      padding: 30px 40px;
      border-radius: 20px;
      max-width: 480px;
      width: 100%;
      box-shadow: 0 0 20px #f6bc26cc;
      text-align: center;
      display: none;
      animation: popin 0.4s ease forwards;
    }

    @keyframes popin {
      0% { transform: scale(0.7); opacity: 0; }
      100% { transform: scale(1); opacity: 1; }
    }

    h1 {
      font-size: 2.1rem;
      margin-bottom: 20px;
      letter-spacing: 2px;
      color: #f6bc26;
    }

    #question {
      font-size: 1.3rem;
      margin-bottom: 24px;
      color: #fff;
      min-height: 70px;
    }

    #choices {
      display: flex;
      flex-direction: column;
      gap: 14px;
      margin-bottom: 20px;
    }

    #choices button {
      background: linear-gradient(45deg, #18376a, #2a4a8b);
      color: #f6bc26;
      border: 2px solid #f6bc26;
      border-radius: 18px;
      padding: 14px 0;
      font-size: 1rem;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 0 8px #f6bc26aa;
      letter-spacing: 0.04em;
      position: relative;
      overflow: hidden;
    }

    #choices button:hover:not(:disabled) {
      background: linear-gradient(45deg, #f6bc26, #ffde59);
      color: #10274b;
      box-shadow: 0 0 18px #f6bc26ee;
      transform: scale(1.04);
    }

    #choices button:disabled {
      cursor: default;
      opacity: 0.7;
    }

    #choices button.correct {
      background-color: #28a745 !important;
      color: white !important;
      border-color: #1e7e34 !important;
      box-shadow: 0 0 15px #28a745cc !important;
    }

    #choices button.wrong {
      background-color: #dc3545 !important;
      color: white !important;
      border-color: #a71d2a !important;
      box-shadow: 0 0 15px #dc3545cc !important;
      animation: shake 0.5s;
    }

    @keyframes shake {
      0%,100% { transform: translateX(0); }
      20%,60% { transform: translateX(-8px); }
      40%,80% { transform: translateX(8px); }
    }

    #timer {
      font-size: 1.1rem;
      margin-bottom: 14px;
      color: #f6bc26;
      font-weight: 700;
    }

    #score {
      font-size: 1.2rem;
      font-weight: 700;
      margin-bottom: 10px;
      color: #f6bc26;
    }

    #start-btn {
      background-color: #f6bc26;
      color: #10274b;
      border: none;
      border-radius: 20px;
      padding: 18px 40px;
      font-weight: 700;
      font-size: 1.3rem;
      cursor: pointer;
      box-shadow: 0 0 20px #f6bc26cc;
      transition: background-color 0.3s ease;
      user-select: none;
    }

    #start-btn:hover {
      background-color: #ffde59;
    }

    @media (max-width: 600px) {
      #quiz-container { padding: 20px 25px; }
      h1 { font-size: 1.5rem; }
      #question { font-size: 1rem; min-height: 60px; }
      #choices button { font-size: 0.9rem; padding: 12px 0; }
      #timer, #score { font-size: 1rem; }
      #start-btn { padding: 14px 28px; font-size: 1.1rem; }
    }
  </style>
</head>
<body>
  <button id="start-btn">เริ่มเกม</button>
  <div id="quiz-container">
    <h1>Play The History Quiz</h1>
    <div id="score">คะแนน: 0</div>
    <div id="timer">⏰ เวลาที่เหลือ: 10 วินาที</div>
    <div id="question">...</div>
    <div id="choices"></div>
  </div>

  <!-- เสียงทั้งหมด พร้อม preload -->
  <audio id="correctSound" src="correct.mp3" preload="auto"></audio>
  <audio id="wrongSound" src="wrong.mp3" preload="auto"></audio>
  <audio id="bgMusic" src="background-music.mp3" preload="auto" loop></audio>
  <audio id="hoverSound" src="hover.mp3" preload="auto"></audio>
  <audio id="startSound" src="cheer.mp3" preload="auto"></audio>
  <audio id="gameOverSound" src="gameover.mp3" preload="auto"></audio>
  <audio id="winnerSound" src="winner.mp3" preload="auto"></audio>

  <script>
    const questions = [
  { q: 'พระเจ้าตากสินมหาราชทรงก่อตั้งกรุงใด?', a: 'ธนบุรี', choices: ['ธนบุรี','อยุธยา','รัตนโกสินทร์','สุโขทัย'] },
  { q: 'พระเจ้าตากสินเป็นเจ้าเมืองของจังหวัดใด?', a: 'จันทบุรี', choices: ['จันทบุรี','ระยอง','ชลบุรี','สมุทรปราการ'] },
  { q: 'การเดินทัพของพระเจ้าตากสินมีจุดมุ่งหมายเพื่อ?', a: 'รวมชาติ', choices: ['รวมชาติ','ตั้งเมืองใหม่','สร้างวัด','ค้าขาย'] },
  { q: 'พระเจ้าตากสินถูกสถาปนาขึ้นเป็นกษัตริย์ในปีใด?', a: 'พ.ศ. 2310', choices: ['พ.ศ. 2310','พ.ศ. 2320','พ.ศ. 2300','พ.ศ. 2330'] },
  { q: 'เมืองหลวงเก่าของอยุธยาถูกทำลายโดยใคร?', a: 'พม่า', choices: ['พม่า','ญี่ปุ่น','อังกฤษ','จีน'] },
  { q: 'พระเจ้าตากสินได้ขึ้นครองราชย์หลังจากเหตุการณ์ใด?', a: 'กรุงศรีอยุธยาตก', choices: ['กรุงศรีอยุธยาตก','สงครามโลกครั้งที่ 2','การปฏิวัติ','การล่าอาณานิคม'] },
  { q: 'พระเจ้าตากสินมหาราชมีพระนามเดิมว่าอะไร?', a: 'สิน', choices: ['สิน','สมชาย','สมศักดิ์','สมบัติ'] },
  { q: 'กองทัพพระเจ้าตากสินเดินทัพไปยังจังหวัดใดเพื่อรวบรวมกำลัง?', a: 'จันทบุรี', choices: ['จันทบุรี','เชียงใหม่','นครราชสีมา','ภูเก็ต'] },
  { q: 'พระเจ้าตากสินทรงตั้งเมืองหลวงที่ใด?', a: 'ธนบุรี', choices: ['ธนบุรี','กรุงเทพฯ','เชียงใหม่','อยุธยา'] },
  { q: 'พระเจ้าตากสินมหาราชสิ้นพระชนม์ในปีใด?', a: 'พ.ศ. 2325', choices: ['พ.ศ. 2325','พ.ศ. 2310','พ.ศ. 2330','พ.ศ. 2340'] },
  { q: 'พระเจ้าตากสินทรงสถาปนากรุงธนบุรีในตำแหน่งใด?', a: 'พระมหากษัตริย์', choices: ['พระมหากษัตริย์','เจ้าเมือง','เจ้าอาณานิคม','พระราชา'] },
  { q: 'พระเจ้าตากสินทรงรวบรวมกำลังจากจังหวัดใดบ้าง?', a: 'จันทบุรีและตราด', choices: ['จันทบุรีและตราด','เชียงใหม่และเชียงราย','กรุงเทพฯและสมุทรปราการ','นครราชสีมาและขอนแก่น'] },
  { q: 'เหตุการณ์สำคัญหลังจากกรุงศรีอยุธยาตกคือ?', a: 'การรวมชาติ', choices: ['การรวมชาติ','สงครามโลกครั้งที่ 1','การล่าอาณานิคม','การสร้างวัด'] },
  { q: 'พระเจ้าตากสินมหาราชใช้กลยุทธ์ใดในการเดินทัพ?', a: 'โจมตีจู่โจม', choices: ['โจมตีจู่โจม','ตั้งรับ','เจรจา','สืบข่าว'] },
  { q: 'พระเจ้าตากสินทรงสร้างวัดใดในธนบุรี?', a: 'วัดบางกะเจ้า', choices: ['วัดบางกะเจ้า','วัดอรุณ','วัดพระแก้ว','วัดไชยวัฒนาราม'] },
  { q: 'พระเจ้าตากสินทรงช่วยชาติจากการรุกรานของใคร?', a: 'พม่า', choices: ['พม่า','อังกฤษ','จีน','ญี่ปุ่น'] },
  { q: 'พระเจ้าตากสินทรงเป็นบิดาของกษัตริย์องค์ใด?', a: 'รัชกาลที่ 1', choices: ['รัชกาลที่ 1','รัชกาลที่ 2','รัชกาลที่ 3','รัชกาลที่ 4'] },
  { q: 'พระเจ้าตากสินทรงสิ้นพระชนม์เหตุใด?', a: 'การรัฐประหาร', choices: ['การรัฐประหาร','โรคระบาด','อุบัติเหตุ','แก่ชรา'] },
  { q: 'ยุคพระเจ้าตากสินเรียกว่าอะไร?', a: 'ยุคธนบุรี', choices: ['ยุคธนบุรี','ยุครัตนโกสินทร์','ยุคอยุธยา','ยุคสุโขทัย'] }
];

    const startBtn = document.getElementById('start-btn');
    const quizContainer = document.getElementById('quiz-container');
    const questionEl = document.getElementById('question');
    const choicesEl = document.getElementById('choices');
    const timerEl = document.getElementById('timer');
    const scoreEl = document.getElementById('score');

    const correctSound = document.getElementById('correctSound');
    const wrongSound = document.getElementById('wrongSound');
    const bgMusic = document.getElementById('bgMusic');
    const hoverSound = document.getElementById('hoverSound');
    const startSound = document.getElementById('startSound');
    const gameOverSound = document.getElementById('gameOverSound');
    const winnerSound = document.getElementById('winnerSound');

    let currentQuestionIndex = 0;
    let score = 0;
    let timeLeft;
    let timer;
    let acceptingAnswers = false;

    function startQuiz() {
      score = 0;
      currentQuestionIndex = 0;
      scoreEl.textContent = `คะแนน: ${score}`;
      startBtn.style.display = 'none';
      quizContainer.style.display = 'block';
      startSound.play();
      bgMusic.volume = 0.15;
      bgMusic.play().catch(() => document.body.addEventListener('click', ()=> bgMusic.play(), {once:true}));
      showQuestion();
    }

    function showQuestion() {
      clearInterval(timer);
      timeLeft = 10;
      timerEl.textContent = `⏰ เวลาที่เหลือ: ${timeLeft} วินาที`;
      acceptingAnswers = true;

      const q = questions[currentQuestionIndex];
      questionEl.textContent = q.q;
      choicesEl.innerHTML = '';

      q.choices.sort(() => Math.random()-0.5).forEach(choice => {
        const btn = document.createElement('button');
        btn.textContent = choice;
        btn.disabled = false;
        btn.addEventListener('click', () => selectAnswer(btn, q.a));
        btn.addEventListener('mouseenter', () => { hoverSound.currentTime=0; hoverSound.play(); });
        choicesEl.appendChild(btn);
      });

      timer = setInterval(() => {
        timeLeft--;
        timerEl.textContent = `⏰ เวลาที่เหลือ: ${timeLeft} วินาที`;
        if(timeLeft<=0) {
          clearInterval(timer);
          acceptingAnswers = false;
          gameOver();
        }
      },1000);
    }

    function selectAnswer(btn, correctAnswer) {
      if(!acceptingAnswers) return;
      acceptingAnswers = false;
      clearInterval(timer);

      const isCorrect = btn.textContent===correctAnswer;
      if(isCorrect) {
        score++;
        scoreEl.textContent = `คะแนน: ${score}`;
        btn.classList.add('correct');
        correctSound.play();
      } else {
        btn.classList.add('wrong');
        wrongSound.play();
        // highlight correct
        Array.from(choicesEl.children).forEach(b=>{ if(b.textContent===correctAnswer) b.classList.add('correct'); });
      }

      setTimeout(()=>{
        currentQuestionIndex++;
        if(currentQuestionIndex<questions.length) showQuestion();
        else endQuiz();
      },1200);
    }

    function gameOver() {
      quizContainer.innerHTML = '<h1>Game Over!</h1><p>คุณหมดเวลา!</p><button onclick="location.reload()">ลองใหม่</button>';
      bgMusic.pause();
      gameOverSound.play();
    }

    function endQuiz() {
      quizContainer.innerHTML = `<h1>จบเกม!</h1><p>คะแนน: ${score}/${questions.length}</p><button onclick="location.reload()">เล่นอีกครั้ง</button>`;
      bgMusic.pause();
      if(score===questions.length) winnerSound.play();
      else if(score>=questions.length*0.7) cheerSound.play();
      else gameOverSound.play();
    }

    startBtn.addEventListener('click', startQuiz);
  </script>
</body>
</html>
